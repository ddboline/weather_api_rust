openapi: 3.0.1
info:
  title: Weather App
  description: Web App to disply weather from openweatherapi
  version: 0.7.25
paths:
  /weather/index.html:
    get:
      parameters:
      - name: zip
        in: query
        required: false
        schema:
          nullable: true
          type: integer
          minimum: 0
      - name: country_code
        in: query
        required: false
        schema:
          nullable: true
          type: string
      - name: q
        in: query
        required: false
        schema:
          nullable: true
          type: string
      - name: lat
        in: query
        required: false
        schema:
          format: latitude
          nullable: true
          type: number
      - name: lon
        in: query
        required: false
        schema:
          format: longitude
          nullable: true
          type: number
      - name: appid
        in: query
        required: false
        schema:
          nullable: true
          type: string
      responses:
        '200':
          description: Display Current Weather and Forecast
          content:
            text/html:
              schema:
                type: string
        '400':
          description: Bad Request
        '404':
          description: Not Found
        '405':
          description: Method not allowed
        '500':
          description: Internal Server Error
  /weather/plot.html:
    get:
      parameters:
      - name: zip
        in: query
        required: false
        schema:
          nullable: true
          type: integer
          minimum: 0
      - name: country_code
        in: query
        required: false
        schema:
          nullable: true
          type: string
      - name: q
        in: query
        required: false
        schema:
          nullable: true
          type: string
      - name: lat
        in: query
        required: false
        schema:
          format: latitude
          nullable: true
          type: number
      - name: lon
        in: query
        required: false
        schema:
          format: longitude
          nullable: true
          type: number
      - name: appid
        in: query
        required: false
        schema:
          nullable: true
          type: string
      responses:
        '200':
          description: Show Plot of Current Weather and Forecast
          content:
            text/html:
              schema:
                type: string
        '400':
          description: Bad Request
        '404':
          description: Not Found
        '405':
          description: Method not allowed
        '500':
          description: Internal Server Error
  /weather/timeseries.js:
    get:
      responses:
        '200':
          description: TimeseriesScript
          content:
            text/javascript:
              schema:
                type: string
  /weather/weather:
    get:
      parameters:
      - name: zip
        in: query
        required: false
        schema:
          nullable: true
          type: integer
          minimum: 0
      - name: country_code
        in: query
        required: false
        schema:
          nullable: true
          type: string
      - name: q
        in: query
        required: false
        schema:
          nullable: true
          type: string
      - name: lat
        in: query
        required: false
        schema:
          format: latitude
          nullable: true
          type: number
      - name: lon
        in: query
        required: false
        schema:
          format: longitude
          nullable: true
          type: number
      - name: appid
        in: query
        required: false
        schema:
          nullable: true
          type: string
      responses:
        '200':
          description: Get WeatherData Api Json
          content:
            application/json:
              schema:
                properties:
                  coord:
                    description: Coordinates
                    properties:
                      lon:
                        description: Longitude
                        type: number
                      lat:
                        description: Latitude
                        type: number
                    type: object
                    required:
                    - lon
                    - lat
                  weather:
                    description: Weather Conditions
                    items:
                      properties:
                        id:
                          type: integer
                          minimum: 0
                        main:
                          type: string
                        description:
                          type: string
                        icon:
                          type: string
                      type: object
                      required:
                      - id
                      - main
                      - description
                      - icon
                    type: array
                  base:
                    type: string
                  main:
                    properties:
                      temp:
                        description: Temperature (K)
                        type: number
                      feels_like:
                        description: Feels Like Temperature (K)
                        type: number
                      temp_min:
                        description: Minimum Temperature (K)
                        type: number
                      temp_max:
                        description: Maximum Temperature (K)
                        type: number
                      pressure:
                        description: Atmospheric Pressure (hPa, h=10^2)
                        type: number
                      humidity:
                        description: Humidity %
                        type: integer
                    type: object
                    required:
                    - temp
                    - feels_like
                    - temp_min
                    - temp_max
                    - pressure
                    - humidity
                  visibility:
                    description: Visibility (m)
                    nullable: true
                    type: number
                  wind:
                    properties:
                      speed:
                        description: Speed (m/s)
                        type: number
                      deg:
                        description: Direction (degrees)
                        nullable: true
                        type: number
                    type: object
                    required:
                    - speed
                  rain:
                    properties:
                      three_hour:
                        description: Rain (mm over previous 3 hours)
                        nullable: true
                        type: number
                      one_hour:
                        description: Rain (mm over previous hour)
                        nullable: true
                        type: number
                    nullable: true
                    type: object
                  snow:
                    properties:
                      three_hour:
                        description: Snow (mm over previous 3 hours)
                        nullable: true
                        type: number
                      one_hour:
                        description: Rain (mm over previous hour)
                        nullable: true
                        type: number
                    nullable: true
                    type: object
                  dt:
                    description: Current Datetime (Unix Timestamp)
                    format: date-time
                    type: string
                  sys:
                    properties:
                      country:
                        nullable: true
                        type: string
                      sunrise:
                        description: Sunrise (Unix Timestamp)
                        format: date-time
                        type: string
                      sunset:
                        description: Sunset (Unix Timestamp)
                        format: date-time
                        type: string
                    type: object
                    required:
                    - sunrise
                    - sunset
                  timezone:
                    description: Timezone (seconds offset from UTC)
                    type: integer
                  name:
                    description: Location Name
                    type: string
                type: object
                required:
                - coord
                - weather
                - base
                - main
                - wind
                - dt
                - sys
                - timezone
                - name
        '400':
          description: Bad Request
        '404':
          description: Not Found
        '405':
          description: Method not allowed
        '500':
          description: Internal Server Error
  /weather/forecast:
    get:
      parameters:
      - name: zip
        in: query
        required: false
        schema:
          nullable: true
          type: integer
          minimum: 0
      - name: country_code
        in: query
        required: false
        schema:
          nullable: true
          type: string
      - name: q
        in: query
        required: false
        schema:
          nullable: true
          type: string
      - name: lat
        in: query
        required: false
        schema:
          format: latitude
          nullable: true
          type: number
      - name: lon
        in: query
        required: false
        schema:
          format: longitude
          nullable: true
          type: number
      - name: appid
        in: query
        required: false
        schema:
          nullable: true
          type: string
      responses:
        '200':
          description: Get WeatherForecast Api Json
          content:
            application/json:
              schema:
                properties:
                  list:
                    description: Main Forecast Entries
                    items:
                      properties:
                        dt:
                          description: Forecasted DateTime (Unix Timestamp)
                          format: date-time
                          type: string
                        main:
                          properties:
                            temp:
                              description: Temperature (K)
                              type: number
                            feels_like:
                              description: Feels Like Temperature (K)
                              type: number
                            temp_min:
                              description: Minimum Temperature (K)
                              type: number
                            temp_max:
                              description: Maximum Temperature (K)
                              type: number
                            pressure:
                              description: Atmospheric Pressure (hPa, h=10^2)
                              type: number
                            sea_level:
                              description: Pressure at Sea Level (hPa, h=10^2)
                              type: number
                            grnd_level:
                              description: Pressure at Ground Level (hPa, h=10^2)
                              type: number
                            humidity:
                              description: Humidity %
                              type: integer
                          type: object
                          required:
                          - temp
                          - feels_like
                          - temp_min
                          - temp_max
                          - pressure
                          - sea_level
                          - grnd_level
                          - humidity
                        weather:
                          items:
                            properties:
                              id:
                                type: integer
                                minimum: 0
                              main:
                                type: string
                              description:
                                type: string
                              icon:
                                type: string
                            type: object
                            required:
                            - id
                            - main
                            - description
                            - icon
                          type: array
                        rain:
                          properties:
                            three_hour:
                              description: Rain (mm over previous 3 hours)
                              nullable: true
                              type: number
                            one_hour:
                              description: Rain (mm over previous hour)
                              nullable: true
                              type: number
                          nullable: true
                          type: object
                        snow:
                          properties:
                            three_hour:
                              description: Snow (mm over previous 3 hours)
                              nullable: true
                              type: number
                            one_hour:
                              description: Rain (mm over previous hour)
                              nullable: true
                              type: number
                          nullable: true
                          type: object
                      type: object
                      required:
                      - dt
                      - main
                      - weather
                    type: array
                  city:
                    description: City Information
                    properties:
                      timezone:
                        description: Timezone (seconds offset from UTC)
                        type: integer
                      sunrise:
                        description: Sunrise (Unix Timestamp)
                        format: date-time
                        type: string
                      sunset:
                        description: Sunset (Unix Timestamp)
                        format: date-time
                        type: string
                    type: object
                    required:
                    - timezone
                    - sunrise
                    - sunset
                type: object
                required:
                - list
                - city
        '400':
          description: Bad Request
        '404':
          description: Not Found
        '405':
          description: Method not allowed
        '500':
          description: Internal Server Error
  /weather/statistics:
    get:
      responses:
        '200':
          description: Get Cache Statistics
          content:
            application/json:
              schema:
                properties:
                  data_cache_hits:
                    type: integer
                    minimum: 0
                  data_cache_misses:
                    type: integer
                    minimum: 0
                  forecast_cache_hits:
                    type: integer
                    minimum: 0
                  forecast_cache_misses:
                    type: integer
                    minimum: 0
                  weather_string_length_map:
                    additionalProperties:
                      type: integer
                      minimum: 0
                    type: object
                type: object
                required:
                - data_cache_hits
                - data_cache_misses
                - forecast_cache_hits
                - forecast_cache_misses
                - weather_string_length_map
        '400':
          description: Bad Request
        '404':
          description: Not Found
        '405':
          description: Method not allowed
        '500':
          description: Internal Server Error
  /weather/locations:
    get:
      parameters:
      - name: offset
        in: query
        required: false
        schema:
          nullable: true
          type: integer
          minimum: 0
      - name: limit
        in: query
        required: false
        schema:
          nullable: true
          type: integer
          minimum: 0
      responses:
        '200':
          description: Get Weather History Locations
          content:
            application/json:
              schema:
                items:
                  properties:
                    location:
                      type: string
                    count:
                      type: integer
                  type: object
                  required:
                  - location
                  - count
                type: array
        '400':
          description: Bad Request
        '404':
          description: Not Found
        '405':
          description: Method not allowed
        '500':
          description: Internal Server Error
  /weather/history:
    get:
      parameters:
      - name: name
        in: query
        required: false
        schema:
          nullable: true
          type: string
      - name: server
        in: query
        required: false
        schema:
          nullable: true
          type: string
      - name: start_time
        in: query
        required: false
        schema:
          format: date
          nullable: true
          type: string
      - name: end_time
        in: query
        required: false
        schema:
          format: date
          nullable: true
          type: string
      responses:
        '200':
          description: Get Weather History
          content:
            application/json:
              schema:
                items:
                  properties:
                    id:
                      format: uuid
                      type: string
                    dt:
                      type: integer
                    created_at:
                      format: date-time
                      type: string
                    location_name:
                      type: string
                    latitude:
                      type: number
                    longitude:
                      type: number
                    condition:
                      type: string
                    temperature:
                      type: number
                    temperature_minimum:
                      type: number
                    temperature_maximum:
                      type: number
                    pressure:
                      type: number
                    humidity:
                      type: integer
                    visibility:
                      nullable: true
                      type: number
                    rain:
                      nullable: true
                      type: number
                    snow:
                      nullable: true
                      type: number
                    wind_speed:
                      type: number
                    wind_direction:
                      nullable: true
                      type: number
                    country:
                      type: string
                    sunrise:
                      format: date-time
                      type: string
                    sunset:
                      format: date-time
                      type: string
                    timezone:
                      type: integer
                    server:
                      type: string
                  type: object
                  required:
                  - id
                  - dt
                  - created_at
                  - location_name
                  - latitude
                  - longitude
                  - condition
                  - temperature
                  - temperature_minimum
                  - temperature_maximum
                  - pressure
                  - humidity
                  - wind_speed
                  - country
                  - sunrise
                  - sunset
                  - timezone
                  - server
                type: array
        '400':
          description: Bad Request
        '404':
          description: Not Found
        '405':
          description: Method not allowed
        '500':
          description: Internal Server Error
    post:
      parameters:
      - name: zip
        in: query
        required: false
        schema:
          nullable: true
          type: integer
          minimum: 0
      - name: country_code
        in: query
        required: false
        schema:
          nullable: true
          type: string
      - name: q
        in: query
        required: false
        schema:
          nullable: true
          type: string
      - name: lat
        in: query
        required: false
        schema:
          format: latitude
          nullable: true
          type: number
      - name: lon
        in: query
        required: false
        schema:
          format: longitude
          nullable: true
          type: number
      - name: appid
        in: query
        required: false
        schema:
          nullable: true
          type: string
      requestBody:
        content:
          application/json:
            schema:
              properties:
                updates:
                  items:
                    properties:
                      id:
                        format: uuid
                        type: string
                      dt:
                        type: integer
                      created_at:
                        format: date-time
                        type: string
                      location_name:
                        type: string
                      latitude:
                        type: number
                      longitude:
                        type: number
                      condition:
                        type: string
                      temperature:
                        type: number
                      temperature_minimum:
                        type: number
                      temperature_maximum:
                        type: number
                      pressure:
                        type: number
                      humidity:
                        type: integer
                      visibility:
                        nullable: true
                        type: number
                      rain:
                        nullable: true
                        type: number
                      snow:
                        nullable: true
                        type: number
                      wind_speed:
                        type: number
                      wind_direction:
                        nullable: true
                        type: number
                      country:
                        type: string
                      sunrise:
                        format: date-time
                        type: string
                      sunset:
                        format: date-time
                        type: string
                      timezone:
                        type: integer
                      server:
                        type: string
                    type: object
                    required:
                    - id
                    - dt
                    - created_at
                    - location_name
                    - latitude
                    - longitude
                    - condition
                    - temperature
                    - temperature_minimum
                    - temperature_maximum
                    - pressure
                    - humidity
                    - wind_speed
                    - country
                    - sunrise
                    - sunset
                    - timezone
                    - server
                  type: array
              type: object
              required:
              - updates
        required: true
      responses:
        '201':
          description: Update Weather History
          content:
            application/json:
              schema:
                type: integer
                minimum: 0
        '400':
          description: Bad Request
        '404':
          description: Not Found
        '405':
          description: Method not allowed
        '500':
          description: Internal Server Error
  /weather/history_plot.html:
    get:
      parameters:
      - name: name
        in: query
        required: true
        schema:
          type: string
      - name: server
        in: query
        required: false
        schema:
          nullable: true
          type: string
      - name: start_time
        in: query
        required: false
        schema:
          format: date
          nullable: true
          type: string
      - name: end_time
        in: query
        required: false
        schema:
          format: date
          nullable: true
          type: string
      responses:
        '200':
          description: Show Plot of Historical Weather
          content:
            text/html:
              schema:
                type: string
        '400':
          description: Bad Request
        '404':
          description: Not Found
        '405':
          description: Method not allowed
        '500':
          description: Internal Server Error
  /weather/direct:
    get:
      parameters:
      - name: zip
        in: query
        required: false
        schema:
          nullable: true
          type: integer
          minimum: 0
      - name: country_code
        in: query
        required: false
        schema:
          nullable: true
          type: string
      - name: q
        in: query
        required: false
        schema:
          nullable: true
          type: string
      - name: lat
        in: query
        required: false
        schema:
          format: latitude
          nullable: true
          type: number
      - name: lon
        in: query
        required: false
        schema:
          format: longitude
          nullable: true
          type: number
      - name: appid
        in: query
        required: false
        schema:
          nullable: true
          type: string
      responses:
        '200':
          description: Direct Geo Location
          content:
            application/json:
              schema:
                items:
                  properties:
                    name:
                      type: string
                    lat:
                      type: number
                    lon:
                      type: number
                    country:
                      type: string
                    zip:
                      nullable: true
                      type: string
                  type: object
                  required:
                  - name
                  - lat
                  - lon
                  - country
                type: array
        '400':
          description: Bad Request
        '404':
          description: Not Found
        '405':
          description: Method not allowed
        '500':
          description: Internal Server Error
  /weather/zip:
    get:
      parameters:
      - name: zip
        in: query
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Zip Geo Location
          content:
            application/json:
              schema:
                properties:
                  name:
                    type: string
                  lat:
                    type: number
                  lon:
                    type: number
                  country:
                    type: string
                  zip:
                    nullable: true
                    type: string
                type: object
                required:
                - name
                - lat
                - lon
                - country
        '400':
          description: Bad Request
        '404':
          description: Not Found
        '405':
          description: Method not allowed
        '500':
          description: Internal Server Error
  /weather/reverse:
    get:
      parameters:
      - name: zip
        in: query
        required: false
        schema:
          nullable: true
          type: integer
          minimum: 0
      - name: country_code
        in: query
        required: false
        schema:
          nullable: true
          type: string
      - name: q
        in: query
        required: false
        schema:
          nullable: true
          type: string
      - name: lat
        in: query
        required: false
        schema:
          format: latitude
          nullable: true
          type: number
      - name: lon
        in: query
        required: false
        schema:
          format: longitude
          nullable: true
          type: number
      - name: appid
        in: query
        required: false
        schema:
          nullable: true
          type: string
      responses:
        '200':
          description: Direct Geo Location
          content:
            application/json:
              schema:
                items:
                  properties:
                    name:
                      type: string
                    lat:
                      type: number
                    lon:
                      type: number
                    country:
                      type: string
                    zip:
                      nullable: true
                      type: string
                  type: object
                  required:
                  - name
                  - lat
                  - lon
                  - country
                type: array
        '400':
          description: Bad Request
        '404':
          description: Not Found
        '405':
          description: Method not allowed
        '500':
          description: Internal Server Error
  /weather/user:
    get:
      responses:
        '200':
          description: Logged in User
          content:
            application/json:
              schema:
                properties:
                  email:
                    description: Email Address
                    type: string
                  session:
                    description: Session Id
                    format: uuid
                    type: string
                  secret_key:
                    description: Secret Key
                    type: string
                type: object
                required:
                - email
                - session
                - secret_key
        '400':
          description: Bad Request
        '404':
          description: Not Found
        '405':
          description: Method not allowed
        '500':
          description: Internal Server Error
components: {}
